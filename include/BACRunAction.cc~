#include "AttRunAction.hh"
#include "AttPrimaryGeneratorAction.hh"
#include "AttDetectorConstruction.hh"
#include "AttActionInitialization.hh"
#include "G4RunManager.hh"
#include "G4Run.hh"
#include "G4AccumulableManager.hh"
#include "G4LogicalVolumeStore.hh"
#include "G4LogicalVolume.hh"
#include "G4UnitsTable.hh"
#include "G4SystemOfUnits.hh"

#include <TFile.h>
#include <TTree.h>
#include <TObjArray.h>
#include <stdlib.h>

AttRunAction::AttRunAction()
  :G4UserRunAction(), RfileName("data_with.root")
{}
	     

AttRunAction::~AttRunAction()
{
}

void AttRunAction::BeginOfRunAction(const G4Run*)
{

  file = new TFile(RfileName, "recreate");
  TTree *tree = new TTree("tree","simulation");
  Tree = (TTree*)file->Get("tree");
}

void AttRunAction::EndOfRunAction(const G4Run*)
{

  Tree->Write();
  file->Close();
}


